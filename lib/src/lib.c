//
// Created by Administrator on 3/28/2024.
//

#include "lib.h"
#include <stdlib.h>
#include <time.h>
#include <limits.h>
#include <time.h>

enum { encryption_key_len = 5 };

char encryption_key[encryption_key_len + 1] = { '\0' };

void lib_generate_key()
{	srand(time(NULL));
	for(int i = 0; i < encryption_key_len; ++i)
	{	encryption_key[i] = rand() % (UCHAR_MAX - 1);
		encryption_key[i] += !encryption_key[i];
	}
}

bool lib_try_key(char * key)
{	for(size_t i = 0;; ++i)
		if(key[i] != encryption_key[i])
			return false;
		else if(!key[i])
			return true;
		else
		{	clock_t target = clock() + 2;
			while(clock() < target);
		}
}
